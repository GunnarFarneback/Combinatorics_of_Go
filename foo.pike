#if 1
array(int) foo = ({
108,
216,
332,
332,
664,
664,
786,
786,
1572,
1572,
2412,
2412,
3174,
3174,
4816,
4816,
4824,
4824,
6348,
6348,
9632,
9632,
21536,
124602,
278160,
278160,
352740,
352740,
842118,
996816,
1287661,
1502376,
1621030,
1621030,
1792200,
1887948,
1887948,
2225280,
2225280,
2332272,
2332272,
2721177,
2721177,
2821920,
2821920,
3527161,
4175790,
4650096,
4996440,
5257872,
5257872,
6145683,
6145683,
6736944,
8204135,
8204135,
9880474,
10405942,
10405942,
11539947,
11539947,
11968069,
11968069,
12019008,
12040858,
14200630,
14200630,
14337600,
24389601,
26183230,
26183230,
27264768,
27264768,
27910752,
33406320,
51386148,
51386148,
53165518,
53165518,
474852058,
474852058,
679119447,
679119447,
1527619484,
1527619484,
2336345486,
2336345486,
3032883365,
3032883365,
3340447728,
3340447728,
7514122100,
7514122100,
14920942915,
14920942915,
20351938767,
20351938767,
65303462932,
93357171503,
209990796774,
417029042112,
568809907178,
17522403007235,
17711207744320,
22423946984935,
22669369048661,
22669369048661,
29015638434961,
521611059777895,
667317801663796,
1295989880390052,
1592845730044658,
1657984061327073,
2014682697810494,
2037741661129283,
2577335787672027,
3312407521591123,
4237473480342545,
4405654313341465,
5636200915775542,
5727509696907248
});
#else
array(int) foo=({
 1		   ,
 4		   ,
 8		   ,
 12		   ,
 24		   ,
 24		   ,
 48		   ,
 64		   ,
 64		   ,
 108		   ,
 108		   ,
 128		   ,
 128		   ,
 216		   ,
 216		   ,
 236		   ,
 236		   ,
 332		   ,
 332		   ,
 472		   ,
 472		   ,
 664		   ,
 664		   ,
 680		   ,
 786		   ,
 786		   ,
 908		   ,
 1152		   ,
 1572		   ,
 1572		   ,
 2412		   ,
 2412		   ,
 3174		   ,
 3174		   ,
 4816		   ,
 4816		   ,
 4824		   ,
 4824		   ,
 5664		   ,
 6348		   ,
 6348		   ,
 7179		   ,
 8424		   ,
 8424		   ,
 9632		   ,
 9632		   ,
 10572		   ,
 10572		   ,
 12862             ,
 12862		   ,
 21536		   ,
 21536		   ,
 21594		   ,
 21594		   ,
 30660		   ,
 30660		   ,
 36664		   ,
 36664		   ,
 42985		   ,
 42985		   ,
 61056		   ,
 62721		   ,
 62721		   ,
 78504		   ,
 78504		   ,
 86481		   ,
 86481		   ,
 89426		   ,
 89426		   ,
 110605		   ,
 110605		   ,
 124602		   ,
 157609		   ,
 162720		   ,
 162720		   ,
 188908		   ,
 225316		   ,
 237648		   ,
 260897		   ,
 278160		   ,
 278160		   ,
 327744		   ,
 327744		   ,
 352740		   ,
 352740		   ,
 404631		   ,
 404631		   ,
 536163		   ,
 581769		   ,
 612297		   ,
 612765		   ,
 612765		   ,
 779828		   ,
 779828		   ,
 841597		   ,
 841597		   ,
 842118		   ,
 966720		   ,
 992061		   ,
 996816		   ,
 1287661	   ,
 1287661	   ,
 1502376	   ,
 1502376	   ,
 1621030	   ,
 1621030	   ,
 1761655	   ,
 1761655	   ,
 1792200	   ,
 1792200	   ,
 1887948	   ,
 1887948	   ,
 2225280	   ,
 2225280	   ,
 2332272	   ,
 2332272	   ,
 2544656	   ,
 2721177	   ,
 2721177	   ,
 2821920	   ,
 2821920	   ,
 3266312	   ,
 3266312	   ,
 3527161	   ,
 4031872	   ,
 4031872	   ,
 4175790	   ,
 4175790	   ,
 4650096	   ,
 4650096	   ,
 4996440	   ,
 5257872	   ,
 5257872	   ,
 5717606	   ,
 5717606	   ,
 6145683	   ,
 6145683	   ,
 6736944	   ,
 7733760	   ,
 8204135	   ,
 8204135	   ,
 8278630	   ,
 8278630	   ,
 9880474	   ,
 9880474	   ,
 10405942	   ,
 10405942	   ,
 11539947	   ,
 11539947	   ,
 11968069	   ,
 11968069	   ,
 12019008	   ,
 12019008	   ,
 12040858	   ,
 12040858	   ,
 14200630	   ,
 14200630	   ,
 14337600	   ,
 14337600	   ,
 24389601	   ,
 24389601	   ,
 26183230	   ,
 26183230	   ,
 27220012	   ,
 27264768	   ,
 27264768	   ,
 27910752	   ,
 27910752	   ,
 33406320	   ,
 33406320	   ,
 35402046	   ,
 35402046	   ,
 37179016	   ,
 51386148	   ,
 51386148	   ,
 53165518	   ,
 53165518	   ,
 53373660	   ,
 53373660	   ,
 59620748	   ,
 59620748	   ,
 93835044	   ,
 119687890	   ,
 474852058	   ,
 474852058	   ,
 679119447	   ,
 679119447	   ,
 1527619484	   ,
 1527619484	   ,
 2336345486	   ,
 2336345486	   ,
 3032883365	   ,
 3032883365	   ,
 3340447728	   ,
 3340447728	   ,
 7514122100	   ,
 7514122100	   ,
 14920942915	   ,
 14920942915	   ,
 20351938767	   ,
 20351938767	   ,
 45680340033	   ,
 65303462932	   ,
 65303462932	   ,
 93357171503	   ,
 146887857420	   ,
 146887857420	   ,
 209990796774	   ,
 209990796774	   ,
 291712768558	   ,
 291712768558	   ,
 397883169260	   ,
 397883169260	   ,
 417029042112	   ,
 417029042112	   ,
 472337831633	   ,
 568809907178	   ,
 568809907178	   ,
 938026781364	   ,
 938026781364	   ,
 1279430375171	   ,
 1279430375171	   ,
 1862866782398	   ,
 2540869011433	   ,
 2540869011433	   ,
 3465635881477	   ,
 17522403007235	   ,
 17711207744320	   ,
 22423946984935	   ,
 22669369048661	   ,
 22669369048661	   ,
 29015638434961	   ,
 521611059777895   ,
 539133462785130   ,
 555023251873160   ,
 667317801663796   ,
 689741748648731   ,
 1295989880390052  ,
 1295989880390052  ,
 1338879370343135  ,
 1592845730044658  ,
 1592845730044658  ,
 1640432407626079  ,
 1657984061327073  ,
 1657984061327073  ,
 2014682697810494  ,
 2014682697810494  ,
 2037741661129283  ,
 2037741661129283  ,
 2086182692415624  ,
 2577335787672027  ,
 2577335787672027  ,
 3312407521591123  ,
 3312407521591123  ,
 3430933143273652  ,
 4237473480342545  ,
 4237473480342545  ,
 4405654313341465  ,
 4405654313341465  ,
 4535727369391945  ,
 4612490282751825  ,
 5636200915775542  ,
 5636200915775542  ,
 5727509696907248  ,
 5727509696907248  ,
 7658367901734815  ,
 16905536460403643 ,
 26674935977299677 ,
 40702521374428356 ,
 42041400744771491 ,
 50134831011871513 ,
 51775263419497592 ,
 63182777893743925 ,
 63578146758103974 ,
 65664329450519598 ,
 70482664050067931 ,
 98627331995992291 ,
 101204529777459629,
 104553952527498435,
 107984885670772087,
 124702050896637973,
 124702050896637973,
 138670397618526857,
 141032395721706889,
 143206124987918802,
 145644886004458714,
 153564188328083451,
 158102874166319082,
 158102874166319082,
 177877183226989865,
 194813035243581115,
 194813035243581115,
 234159058313995716,
 241817426215730531,
 247069244785753893,
 259997517612256974,
 259997517612256974,
 320377950197781474,
 320377950197781474
});
#endif

array(array(int)) find_sums(array(int) a, int s)
{
    int sum = 0;
    foreach (a, int e)
	sum += e;

    if (sum < s)
	return ({});
    
    array(array(int)) result =({});
    for (int k = sizeof(a) - 1; k >= 0; k--)
    {
	int e = a[k];
	if (e < s)
	{
	    array(array(int)) subresult = find_sums(a[..k-1], s - e);
	    foreach (subresult, array(int) b)
	    {
		result += ({({e}) + b});
	    }
	    if (sizeof(result) > 200)
		return result;
	}
	else if (e == s)
	{
	    result += ({({s})});
	    return result;
	}
    }

    return result;
}

int main(int argc, array(string) arg)
{
    array(array(int)) a = find_sums(foo, 339546267208936204);
    write("%O\n", a);
}
